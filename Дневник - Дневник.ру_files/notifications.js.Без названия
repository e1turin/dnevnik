!function(e){function t(t){for(var r,a,c=t[0],u=t[1],s=t[2],p=0,f=[];p<c.length;p++)a=c[p],o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={10:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/client/";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;i.push([604,0]),n()}({104:function(e,t,n){"use strict";n.r(t);var r={NpoSpo:"npo",Odo:"odo",Dod:"dod"};window.__=function(e){var t=window.dnevnik&&window.dnevnik.localizationSchoolType;if(t){var n=void 0;switch(t){case r.Dod:if(n=window.localization[r.Dod+"_"+e])return n;case r.Odo:if(n=window.localization[r.Odo+"_"+e])return n;case r.NpoSpo:if(n=window.localization[r.NpoSpo+"_"+e])return n}}return window.localization[e]||e}},105:function(e,t,n){window._babelPolyfill||n(179)},11:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(17),o=function(e){var t=r.a&&r.a.analytics&&r.a.analytics.yandex&&r.a.analytics.yandex.reachGoal;t&&t({target:e})},i=function(e){var t=r.a&&r.a.analytics&&r.a.analytics.yandex&&r.a.analytics.yandex.params;t&&t(e)}},14:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var r=n(20),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=Object(r.b)({WebApplicationException:null,FetchError:null,ValidationException:null}),s=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"function"==typeof Error.captureStackTrace?Error.captureStackTrace(r,t):r.stack=new Error(e).stack,r.name="ServiceStackError",r.responseStatus=e,r.httpStatus=n||500,r}return c(t,Error),o(t,null,[{key:"responseStatus",value:function(e,t,n){return{errorCode:e,message:t,errors:n}}},{key:"validationException",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=Object.keys(e).map(function(t){return{fieldName:t,message:e[t]}});throw new t(t.responseStatus(u.ValidationException,n,r),200)}}]),t}(),l=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"function"==typeof Error.captureStackTrace?Error.captureStackTrace(r,t):r.stack=new Error(e).stack,r.name="ApiError",r.json=e,r.httpStatus=n||500,r}return c(t,Error),t}();!function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Error.captureStackTrace(r,t),r.status=n,r.data=e,r.name="PollingError",r}c(t,Error)}()},17:function(e,t,n){"use strict";var r=window.dnevnik||{};t.a=r},18:function(e,t,n){"use strict";var r=n(33),o=n(62);function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}n.d(t,"b",function(){return l}),n.d(t,"a",function(){return p});var a=function(e){var t=function(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]}(e),n=t.split("."),r=n.length;return r>2&&(t=n[r-2]+"."+n[r-1],2===n[r-2].length&&2===n[r-1].length&&(t=n[r-3]+"."+t)),t},c=function(e,t){e.removeAttribute("style");var n=document.createElement(t);n.innerHTML=e.innerHTML,e.innerHTML="",e.appendChild(n)},u=function(e,t,n){var r=document.createElement("div");return r.innerHTML=e,r.innerText.length>t&&(r.innerHTML=function(e,t,n){var r=t<10?t:10,o=["img","br"],i=[],a=0,c="",u=new RegExp("<s*([^s>]+)([^>]*)/s*>"),s=new RegExp('<\\/?\\w+\\s*([\\w|-]+\\s*(=\\s*"[^"]*")?\\s*)*\\s*\\/?\\s*>'),l=/(((ftp|https?):\/\/)[\-\w@:%_\+.~#?,&\/\/=]+)|((mailto:)?[_.\w\-]+@([\w][\w\-]+\.)+[a-zA-Z]{2,3})/g,p=new RegExp('<img\\s*([\\w|-]+\\s*(=\\s*"[^"]*")?\\s*)*\\s*\\/?\\s*>'),f=new RegExp("\\W+","g"),m=!0,d=void 0,h=void 0,v=void 0,b=void 0;function y(e){var t=e.indexOf(" ");if(-1===t&&-1===(t=e.indexOf(">")))throw new Error("HTML tag is not well-formed : "+e);return e.substring(1,t)}function x(e,r){var o=t-a,i=o,c=o<n.slop,u=c?o:n.slop-1,s=void 0,l=c?0:o-n.slop,p=r||o+n.slop,m=void 0;if(!n.truncateLastWord){if(s=e.slice(l,p),r&&s.length<=r)i=s.length;else for(;null!==(m=f.exec(s));){if(!(m.index<u)){if(m.index===u){i=o;break}i=o+(m.index-u);break}if(i=o-(u-m.index),0===m.index&&o<=1)break}e.charAt(i-1).match(/\s$/)&&i--}return i}for((n=n||{}).ellipsis=void 0!==n.ellipsis?n.ellipsis:"...",n.truncateLastWord=void 0===n.truncateLastWord||n.truncateLastWord,n.slop=void 0!==n.slop?n.slop:r;m;){if(!(m=s.exec(e))){if(a>=t)break;if(!(m=l.exec(e))||m.index>=t){c+=e.substring(0,x(e));break}for(;m;)d=m[0],h=m.index,c+=e.substring(0,h+d.length-a),e=e.substring(h+d.length),m=l.exec(e);break}if(d=m[0],h=m.index,a+h>t){c+=e.substring(0,x(e,h));break}a+=h,c+=e.substring(0,h),"/"===d[1]?(i.pop(),b=null):(b=u.exec(d))||(v=y(d),i.push(v)),c+=b?b[0]:d,e=e.substring(h+d.length)}return e.length>t-a&&n.ellipsis&&(c+=n.ellipsis),c+=function(e){var t="";return e.reverse().forEach(function(e,n){-1===o.indexOf(e)&&(t+="</"+e+">")}),t}(i),n.keepImageTag||(c=function(e){var t,n,r=p.exec(e);return r?(t=r.index,n=r[0].length,e.substring(0,t)+e.substring(t+n)):e}(c)),c}(r.innerHTML,t),r.innerHTML+=n),r.innerHTML},s=function(e){return e&&(""===e.textContent.trim()||1===e.childElementCount&&"BR"===e.firstChild.tagName)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,r=e.match(/<img .*?>/g);r&&[].concat(i(new Set(r))).forEach(function(e){var t=/id="([^"]+)"/.exec(e);if(t&&t[1]){var r=new RegExp(e,"g");n=n.replace(r,t[1])}});var o=document.createElement("div");o.innerHTML=n;return function e(t){if(1===t.nodeType){"italic"===t.style.fontStyle?c(t,"i"):"bold"===t.style.fontWeight&&c(t,"b");for(var n=t.firstChild;n;)e(n),n=n.nextSibling}}(o),function(e){for(var t=e.firstChild;s(t);){var n=t.nextSibling;e.removeChild(t),t=n}for(t=e.lastChild;s(t);){var r=t.previousSibling;e.removeChild(t),t=r}}(o),t?o.textContent||o.innerText:o.innerHTML},p=function(e,t,n,c,s){var l=e;c&&(l=u(l,c,s));var p=e.match(r.b);return p&&[].concat(i(new Set(p))).forEach(function(e){var n="<img id="+e+" src="+r.a+" class="+t+' style="background-position:'+r.c[e].position+'"/>',o=new RegExp(e,"g");l=l.replace(o,n)}),n&&(l=function(e){var t=window.dnevnik.urls,n=t.whiteList,r=t.moderate,i=t.domain,c=window.dnevnik.user?window.dnevnik.user.id:null,u=e,s=u.match(/<a href="(.*?)"/g);s&&s.forEach(function(e){var t=e.slice(9).slice(0,-1),o=a(t);u=n.some(function(e){return e===o})?u.replace(e,'<a href="'+t+'" target="_blank"'):u.replace(e,'<a href="'+r+"?link="+t+"&referer=https://"+i+"/user/user.aspx?user="+c+'" target="_blank"')});var l=[];if(u=u.replace(/((https?|ftps?):\/\/[^"<\s]+)(?![^<>]*>|[^"]*?<\/a)/gi,function(e){var t=a(e);return l.push(e),n.some(function(e){return e===t})?'<a href="'+e+'" target="_blank">'+e+"</a>":'<a href="'+r+"?link="+e+"&referer=https://"+i+"/user/user.aspx?user="+c+'" target="_blank">'+e+"</a>"}),l){var p=!1;l.forEach(function(e){if(!p){var t=e.match(/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*?[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/i);if(t){p=!0;var n="https://www.youtube.com/embed/"+t[1];u+="<iframe id="+t[0]+" src="+n+' frameborder="0" allowfullscreen></iframe>',Object(o.b)({content:t[0]}).then(function(e){if(!e){p=!1;var n=document.getElementById(t[0]);n.parentNode.removeChild(n)}})}}})}return u}(l)),l}},20:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return Object.keys(e).forEach(function(n){e[n]=t(n)}),e},o=function(e){return e?Object.keys(e).filter(function(t){return void 0!==e[t]}).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"):""}},24:function(e,t,n){"use strict";n(177);var r=n(20),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"same-origin",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{simple:!1};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.get=function(n,o){return fetch(n+(o?"?"+Object(r.a)(o):""),{method:"GET",cache:"no-cache",headers:e.getRequestHeaders(t.headers),credentials:t.credentials})},this.post=function(n,r){return fetch(n,{method:"POST",cache:"no-cache",headers:e.getRequestHeaders(t.headers),body:e.getRequestBody(t.headers,r),credentials:t.credentials})},this.credentials=n,this.headers=o}return i(e,null,[{key:"getRequestHeaders",value:function(e){return!!e.simple?new Headers({"Content-Type":"application/x-www-form-urlencoded"}):new Headers({Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",pragma:"no-cache"})}},{key:"getRequestBody",value:function(e,t){if(!!e.simple){var n=[];return Object.keys(t).forEach(function(e){Array.isArray(t[e])?t[e].forEach(function(t,r){t&&"object"===(void 0===t?"undefined":o(t))?Object.keys(t).forEach(function(o){n.push(e+"["+r+"]."+o+"="+encodeURIComponent(t[o]))}):n.push(e+"="+encodeURIComponent(t))}):null===t[e]?n.push(e+"="):n.push(e+"="+encodeURIComponent(t[e]))}),n.join("&")}return JSON.stringify(t)}}]),e}(),c=n(14),u=n(54);n.d(t,"a",function(){return l}),n.d(t,"b",function(){return p});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var l=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"same-origin",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{simple:!1};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.get=function(t,r){return e.call(n.request.get,""+n.apiUrl+t,r)},this.post=function(t,r){return e.call(n.request.post,""+n.apiUrl+t,r)},this.apiUrl=t,this.request=new a(r,o)}return s(e,null,[{key:"call",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(t,n,r){var o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.call(null,n,r);case 2:if(o=e.sent,e.prev=3,401!==o.status){e.next=6;break}throw new c.a({message:"Unauthorized",errorCode:o.statusText},401);case 6:if(204!==o.status){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,o.json();case 10:if(!(i=e.sent).responseStatus){e.next=13;break}throw new c.b(i.responseStatus,o.status);case 13:if(!(o.status<200||o.status>=300)){e.next=15;break}throw new c.a(i,o.status);case 15:return e.abrupt("return",i);case 18:if(e.prev=18,e.t0=e.catch(3),!(e.t0 instanceof SyntaxError)){e.next=22;break}throw new c.a({message:"Parsing response error",errorCode:"SyntaxError"},o.status);case 22:if(!(e.t0 instanceof TypeError)){e.next=24;break}throw new c.a({message:"Network error",errorCode:"TypeError"},o.status);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[3,18]])}));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),p=new l(u.a.apiUrl)},244:function(e,t){e.exports={container:"_3Fb2e",author:"_3mh0q",announcement_icon:"_1ltFd"}},291:function(e,t){e.exports={container:"_1-yMc",content:"_1-DUv",time:"_3ReWh",avatar:"mYO5j",link:"_2npMM",emoji:"_2cN7l",text:"_2_nLR"}},317:function(e,t){e.exports={container:"zKoX5",content:"x6wee",time:"_1qro3",avatar:"_16UCH",icon:"iNgPM",label:"_3EXzJ",text:"_1vmiT"}},33:function(e,t,n){"use strict";var r;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var i=(o(r={"🙂":{position:"-153px -114px",name:"small_smile"},"😃":{position:"-1px -133px",name:"smile_open_mouth"},"😛":{position:"-20px -133px",name:"smile_tounge"},"😄":{position:"-39px -133px",name:"smile"},"😌":{position:"-58px -133px",name:"smiling_at_peace"},"😏":{position:"-77px -133px",name:"smirk"},"😯":{position:"-96px -133px",name:"surprised_eyebrows"},"😦":{position:"-115px -133px",name:"surprised_frown"},"😮":{position:"-134px -133px",name:"surprised"},"😅":{position:"-153px -133px",name:"sweat_grin"},"😁":{position:"-1px -152px",name:"teeth_smile"},"😆":{position:"-77px -57px",name:"grin_eyes"},"😬":{position:"-96px -57px",name:"grinn"},"😀":{position:"-115px -57px",name:"grinning_face"},"🤗":{position:"-134px -57px",name:"happy_hands"}},"😀",{position:"-153px -57px",name:"happy"}),o(r,"😍",{position:"-1px -76px",name:"heart_eyes"}),o(r,"😚",{position:"-20px -76px",name:"kiss_eyes_closed"}),o(r,"🤒",{position:"-20px -152px",name:"thermometer"}),o(r,"🤔",{position:"-39px -152px",name:"thinking"}),o(r,"😋",{position:"-58px -152px",name:"tounge_smile"}),o(r,"🙃",{position:"-77px -152px",name:"upside_down"}),o(r,"😗",{position:"-96px -152px",name:"whistle"}),o(r,"😉",{position:"-115px -152px",name:"wink_eyebrows"}),o(r,"😘",{position:"-134px -152px",name:"wink_kiss"}),o(r,"😜",{position:"-153px -152px",name:"winking_tounge"}),o(r,"😇",{position:"-20px -0px",name:"angle"}),o(r,"😡",{position:"-39px -0px",name:"angry"}),o(r,"🤕",{position:"-58px -0px",name:"bandage"}),o(r,"😑",{position:"-77px -0px",name:"blank_blank"}),o(r,"😐",{position:"-96px -0px",name:"blank"}),o(r,"🤧",{position:"-115px -0px",name:"blow_nosenose"}),o(r,"😰",{position:"-134px -0px",name:"blue_head_sewat"}),o(r,"☺️",{position:"-153px -0px",name:"blush_smile"}),o(r,"😊",{position:"-1px -19px",name:"blushing_smile"}),o(r,"😎",{position:"-39px -19px",name:"cool"}),o(r,"🤠",{position:"-58px -19px",name:"cowboy_smile"}),o(r,"😝",{position:"-77px -19px",name:"crazy_eye_tounge_smile"}),o(r,"😢",{position:"-96px -19px",name:"cry_one_tear"}),o(r,"😂",{position:"-115px -19px",name:"emojies_smile"}),o(r,"😭",{position:"-134px -19px",name:"crying"}),o(r,"😵",{position:"-153px -19px",name:"dead_eyes_bigmouth"}),o(r,"😔",{position:"-58px -38px",name:"disappointed_blank"}),o(r,"😞",{position:"-77px -38px",name:"disappointed_sad"}),o(r,"😒",{position:"-96px -38px",name:"disgusted_side_eye"}),o(r,"🤤",{position:"-115px -38px",name:"drooling"}),o(r,"🙄",{position:"-134px -38px",name:"eyeroll"}),o(r,"☹️",{position:"-153px -38px",name:"frown"}),o(r,"😤",{position:"-1px -57px",name:"fuming"}),o(r,"🤓",{position:"-20px -57px",name:"geek"}),o(r,"👻",{position:"-39px -57px",name:"ghost"}),o(r,"🤢",{position:"-58px -57px",name:"green_sick"}),o(r,"😠",{position:"-39px -76px",name:"mad"}),o(r,"😕",{position:"-58px -76px",name:"meeeh"}),o(r,"🤑",{position:"-77px -76px",name:"money"}),o(r,"😶",{position:"-96px -76px",name:"no_mouth"}),o(r,"😧",{position:"-115px -76px",name:"open_mouth_shocked"}),o(r,"😖",{position:"-134px -76px",name:"pained_confused"}),o(r,"😫",{position:"-153px -76px",name:"pained_cry"}),o(r,"😣",{position:"-1px -95px",name:"pained_eyebrow"}),o(r,"🤥",{position:"-20px -95px",name:"pinokio"}),o(r,"💩",{position:"-39px -95px",name:"poo"}),o(r,"🙁",{position:"-96px -95px",name:"question_frown"}),o(r,"🤣",{position:"-134px -95px",name:"rotfc"}),o(r,"😩",{position:"-153px -95px",name:"sad_frown"}),o(r,"😪",{position:"-1px -114px",name:"sad_snot"}),o(r,"😓",{position:"-20px -114px",name:"sad_sweat"}),o(r,"😱",{position:"-39px -114px",name:"shocked_dead"}),o(r,"😳",{position:"-58px -114px",name:"shocked_eyes"}),o(r,"😲",{position:"-77px -114px",name:"shocked"}),o(r,"😷",{position:"-96px -114px",name:"sick_mask"}),o(r,"😙",{position:"-1px -171px",name:"wistle_eyes_closed"}),o(r,"😟",{position:"-20px -171px",name:"worried_frown"}),o(r,"😨",{position:"-39px -171px",name:"worried_open0mouth"}),o(r,"😥",{position:"-58px -171px",name:"worried_sweat"}),o(r,"🤐",{position:"-77px -171px",name:"zipped_lips"}),o(r,"😴",{position:"-96px -171px",name:"zzz"}),o(r,"🤖",{position:"-115px -95px",name:"robot"}),o(r,"👿",{position:"-58px -95px",name:"purple_devil"}),o(r,"😈",{position:"-77px -95px",name:"purple_devil2"}),o(r,"👽",{position:"-1px -0px",name:"alian"}),o(r,"🤡",{position:"-20px -19px",name:"cloun"}),o(r,"👺",{position:"-1px -38px",name:"devil_mask"}),o(r,"👹",{position:"-20px -38px",name:"devil_mask2"}),o(r,"👾",{position:"-39px -38px",name:"digital_alian"}),o(r,"☠️",{position:"-115px -114px",name:"skull_crossbones"}),o(r,"💀",{position:"-134px -114px",name:"skull"}),r),a="data:image/gif;base64,R0lGODlhAQABAPAAAAAAAP///yH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",c=/(\uD83D\uDE42|\uD83D\uDE03|\uD83D\uDE1B|\uD83D\uDE04|\uD83D\uDE0C|\uD83D\uDE0F|\uD83D\uDE2F|\uD83D\uDE26|\uD83D\uDE2E|\uD83D\uDE05|\uD83D\uDE01|\uD83D\uDE06|\uD83D\uDE2C|\uD83D\uDE00|\uD83E\uDD17|\uD83D\uDE0D|\uD83D\uDE1A|\uD83E\uDD12|\uD83E\uDD14|\uD83D\uDE0B|\uD83D\uDE43|\uD83D\uDE17|\uD83D\uDE09|\uD83D\uDE18|\uD83D\uDE1C|\uD83D\uDE07|\uD83D\uDE21|\uD83E\uDD15|\uD83D\uDE11|\uD83D\uDE10|\uD83E\uDD27|\uD83D\uDE30|\u263A\uFE0F|\uD83D\uDE0A|\uD83D\uDE0E|\uD83E\uDD20|\uD83D\uDE1D|\uD83D\uDE22|\uD83D\uDE02|\uD83D\uDE2D|\uD83D\uDE35|\uD83D\uDE14|\uD83D\uDE1E|\uD83D\uDE12|\uD83E\uDD24|\uD83D\uDE44|\u2639\uFE0F|\uD83D\uDE24|\uD83E\uDD13|\uD83D\uDC7B|\uD83E\uDD22|\uD83D\uDE20|\uD83D\uDE15|\uD83E\uDD11|\uD83D\uDE36|\uD83D\uDE27|\uD83D\uDE16|\uD83D\uDE2B|\uD83D\uDE23|\uD83E\uDD25|\uD83D\uDCA9|\uD83D\uDE41|\uD83E\uDD23|\uD83D\uDE29|\uD83D\uDE2A|\uD83D\uDE13|\uD83D\uDE31|\uD83D\uDE33|\uD83D\uDE32|\uD83D\uDE37|\uD83D\uDE19|\uD83D\uDE1F|\uD83D\uDE28|\uD83D\uDE25|\uD83E\uDD10|\uD83D\uDE34|\uD83E\uDD16|\uD83D\uDC7F|\uD83D\uDE08|\uD83D\uDC7D|\uD83E\uDD21|\uD83D\uDC7A|\uD83D\uDC79|\uD83D\uDC7E|\u2620\uFE0F|\uD83D\uDC80)(?![^<]*>)/gm},339:function(e,t){e.exports={container:"_3UbUp",content:"_1Bl7U",time:"_26PC8",avatar:"_1rMWu",text:"Qu_90"}},340:function(e,t){e.exports={container:"_3jrLH",content:"q-q6y",time:"_3UElC",avatar:"_1O0fh",text:"UHo8L"}},36:function(e,t,n){"use strict";var r=n(24);t.a=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.post=function(){var e;return(e=t.client).post.apply(e,arguments)},this.get=function(){var e;return(e=t.client).get.apply(e,arguments)},this.client=n||r.b}},38:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(1),a=n.n(i),c=n(46),u=n.n(c),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isAvatarFetching:!0,isAvatarValid:!0},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),s(t,[{key:"componentWillMount",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.author.avatarUrl,n=void 0,!(t&&t.length>0)){e.next=9;break}return r=function(e){return new Promise(function(t){var n=new Image;n.onload=function(){return t(!0)},n.onerror=function(){return t(!1)},n.src=e})},e.next=6,r(t);case 6:n=e.sent,e.next=10;break;case 9:n=!1;case 10:this.setState({isAvatarFetching:!1,isAvatarValid:n});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e,t){return t.isAvatarValid!==this.state.isAvatarValid}},{key:"render",value:function(){var e=this.state,t=e.isAvatarFetching,n=e.isAvatarValid,r=this.props,i=r.author,a=r.style,c=r.showName,s=r.target,l=r.onClick,p=i.avatarUrl,f=i.redirectUrl,m=i.name,d=m?m.split(" ").map(function(e){return e[0]}).join("").slice(0,2):"";return o.a.createElement("div",{className:u.a.container,onClick:l},n?o.a.createElement("a",{title:m,href:f,target:s},o.a.createElement("img",{src:p,className:u.a.avatar,alt:t?"":m,style:a})):o.a.createElement("a",{title:m,className:u.a.avatar_empty,href:f,target:s,style:a},o.a.createElement("span",{className:u.a.avatar_letter,style:{fontSize:a.fontSize}},d)),c&&o.a.createElement("a",{className:u.a.link,href:f,style:{fontSize:a.fontSize},target:s},m))}}]),t}();p.propTypes={author:a.a.object.isRequired,style:a.a.object.isRequired,showName:a.a.bool,target:a.a.string},p.defaultProps={showName:!1,target:"_self"},t.a=p},426:function(e,t){e.exports={container:"_1N6Np",notifications:"_1vy6o",placeholder:"gaVlJ"}},46:function(e,t){e.exports={container:"_3poVc",avatar:"_3XNsu",avatar_empty:"_5Stl6 _3XNsu",avatar_letter:"eFLL6",link:"_1X5__"}},477:function(e,t){e.exports={container:"_3ZNdI",counter:"_3myRr"}},478:function(e,t){e.exports={container:"_3iSOM","animate-opacity":"wPeHa",bar:"_6uQEK","animate-color":"QNrZU"}},479:function(e,t){e.exports={container:"_2oZ_y",text:"_2qgLj"}},480:function(e,t){e.exports={container:"_1Ln4I",view:"qcuJm",new:"_1muWU"}},54:function(e,t,n){"use strict";var r=window.settings||{apiUrl:"/api"};t.a=r},548:function(e,t){e.exports={container:"_1hcSH"}},583:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(59),a=n(285),c=window.notificationsAppSettings||{apiUrl:"/api"},u=n(8),s=(__("label.notifications.replycomment.title.male"),__("label.notifications.replycomment.title.female"),__("label.notifications.discussioncomment.title.male"),__("label.notifications.discussioncomment.title.female"),n(1)),l=n.n(s),p=n(6),f=n(11),m={HintAdShown:"hint_ad",NotificationsAdOpened:"click_icon_ad",NotificationAdClicked:"click_notification_ad",HintCommentShown:"hint_comment",NotificationsCommentOpened:"click_icon_comment",NotificationCommentClicked:"click_notification_comment",CounterShown:"show_notification_counter",NotificationsOpened:"click_notification_counter",NotificationClicked:"click_notification"},d={Comment:"CommentNotification",Announcement:"AnnouncementNotification",Engagement:"EngagementNotification",Tutoring:"TutoringNotification"},h=n(2),v=n(9),b=n(36);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=new(n(24).a)(c.apiUrl,"include"),g=function(e){function t(){return y(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,E))}return w(t,b["a"]),t}(),_=new(function(e){function t(){var e,n,r;y(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=x(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.fetchNotifications=function(e){var t=e.lastNotificationId,n=e.limit;return r.get("/notifications?lastNotificationId="+t+"&limit="+n)},r.viewNotifications=function(){return r.post("/notifications/view")},r.readNotifications=function(e){var t=e.notificationId;return r.post("/notifications/"+t+"/read")},x(r,n)}return w(t,g),t}()),D=Object(v.a)("notifications",{NOTIFICATIONS_REQUEST:null,NOTIFICATIONS_REQUEST_COMPLETE:null,NOTIFICATIONS_REQUEST_FAILED:null,VIEW_REQUEST:null,VIEW_REQUEST_COMPLETE:null,VIEW_REQUEST_FAILED:null,READ_REQUEST:null,READ_REQUEST_COMPLETE:null,READ_REQUEST_FAILED:null}),O=10,k=regeneratorRuntime.mark(A),j=function(e){return{type:D.NOTIFICATIONS_REQUEST,payload:{limit:O,lastNotificationId:e||null},meta:{params:{lastNotificationId:e||null}}}},N=Object(v.b)(D.NOTIFICATIONS_REQUEST,_.fetchNotifications),R=function(e){return{type:D.VIEW_REQUEST,meta:{params:{redirectUrl:e||null}}}},C=function(e,t){var n=regeneratorRuntime.mark(o),r=function(e,t){var n=regeneratorRuntime.mark(r);function r(r){var o,i=r.payload,a=r.meta;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(h.a)(t,i);case 3:if(!(o=n.sent).isSuccess){n.next=11;break}if(!a.params.redirectUrl){n.next=9;break}window.location=a.params.redirectUrl,n.next=11;break;case 9:return n.next=11,Object(h.c)({type:e+"_COMPLETE",payload:o,meta:a});case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(h.c)({type:e+"_FAILED",payload:n.t0});case 17:case"end":return n.stop()}},n,this,[[0,13]])}return r}(e,t);function o(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.g)(e,r);case 2:case"end":return t.stop()}},n,this)}return o}(D.VIEW_REQUEST,_.viewNotifications),T=function(e,t){return{type:D.READ_REQUEST,payload:{notificationId:e},meta:{params:{redirectUrl:t}}}},P=function(e,t){var n=regeneratorRuntime.mark(o),r=function(e,t){var n=regeneratorRuntime.mark(r);function r(r){var o,i=r.payload,a=r.meta;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(h.a)(_.viewNotifications,i);case 3:if(!n.sent.isSuccess){n.next=11;break}return n.next=7,Object(h.a)(t,i);case 7:return o=n.sent,n.next=10,Object(h.c)({type:e+"_COMPLETE",payload:o,meta:a});case 10:window.location=a.params.redirectUrl;case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(h.c)({type:e+"_FAILED",payload:n.t0,meta:a});case 17:case"end":return n.stop()}},n,this,[[0,13]])}return r}(e,t);function o(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.g)(e,r);case 2:case"end":return t.stop()}},n,this)}return o}(D.READ_REQUEST,_.readNotifications);function A(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(N);case 2:return e.next=4,Object(h.b)(C);case 4:return e.next=6,Object(h.b)(P);case 6:case"end":return e.stop()}},k,this)}var S=n(31),U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=function(e){return e.notifications},F=Object(S.createSelector)(I,function(e){return 0===e.notifications.length?e.notifications:e.notifications.map(function(e){return U({},e,{contextParams:U({},e.contextParams,{text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3];if(r!==d.Engagement&&r!==d.Tutoring){var o=e.length+t.length+n.length-85;return o>0?n.slice(0,n.length-o)+"...":n}return n}(e.contextParams.author,e.contextParams.title,e.contextParams.text,e.type)})})})}),L=Object(S.createSelector)(I,function(e){return e.isFetching}),q=Object(S.createSelector)(I,function(e){return e.unviewedCount}),M=Object(S.createSelector)(I,function(e){return e.hasNext}),H=n(549),V=n.n(H),Q=n(7),W=n(18),z=n(172),B=n.n(z),X=n(171),J=n.n(X),$=n(170),Z=n.n($),G=n(87),K=n.n(G),Y=n(128),ee=n.n(Y),te=n(127),ne=n.n(te),re=n(169),oe=n.n(re),ie=["янв.","февр.","мар.","апр.","мая","июня","июля","авг.","сент.","окт.","нояб.","дек."],ae=function(e){var t="Сегодня",n="Вчера",r=new Date(1e3*e);return B()(r)?t+" в "+K()(r,"HH:mm"):J()(r)?n+" в "+K()(r,"HH:mm"):Z()(r)?ne()(r)+" "+ie[ee()(r)]+" в "+K()(r,"HH:mm"):ne()(r)+" "+ie[ee()(r)]+" "+oe()(r)},ce=n(4),ue=n.n(ce),se=n(480),le=n.n(se),pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var me=function(e){var t,n;return n=t=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=fe(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),r.handleReadNotifications=function(e){var t=r.props,n=t.onRead,o=t.onView,i=t.notification;i.type===d.Announcement?Object(f.b)(m.NotificationAdClicked):i.type===d.Comment&&Object(f.b)(m.NotificationCommentClicked),Object(f.b)(m.NotificationClicked),"no_read"!==e.target.id?"Read"!==r.props.notification.status?n([i.id],i.contextParams.redirectUrl):window.location=i.contextParams.redirectUrl:o(i.contextParams.profileUrl)},fe(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.Component),pe(n,[{key:"render",value:function(){var t=this.props.notification,n=t.id,r=t.status,i=t.eventDate,a=t.contextParams;return o.a.createElement("div",{id:n,className:ue()(le.a.container,le.a[r.toLowerCase()]),onClick:this.handleReadNotifications},o.a.createElement(e,{eventDate:i,contextParams:a}))}}]),n}(),t.PropTypes={notification:l.a.shape({status:l.a.string.isRequired,eventDate:l.a.string.isRequired,contextParams:l.a.object.isRequired,id:l.a.number.isRequired}),onRead:l.a.func.isRequired,onView:l.a.func.isRequired},n},de=n(38),he=n(291),ve=n.n(he),be=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),be(t,[{key:"componentDidMount",value:function(){var e=Object(W.a)(this.props.contextParams.text,ve.a.emoji,!1),t=void 0;try{t=decodeURIComponent(e)}catch(n){t=e}this.text.innerHTML+="«"+t+"»"}},{key:"render",value:function(){var e=this,t=this.props,n=t.eventDate,r=t.contextParams,i=r.author,a=r.avatarUrl,c=r.redirectUrl,u=r.commentType,s=r.sex,l=u&&s?__("label.notifications."+u.toLowerCase()+".title."+s.toLowerCase()):"";return o.a.createElement("div",{className:ve.a.container},o.a.createElement("div",{className:ve.a.avatar},o.a.createElement(de.a,{author:{name:i,avatarUrl:a,redirectUrl:c},style:{width:30,height:30,fontSize:14,marginRight:8}})),o.a.createElement("div",{className:ve.a.content},o.a.createElement("div",{className:ve.a.text},o.a.createElement("a",{id:"no_read",className:ve.a.link},i),o.a.createElement("span",{ref:function(t){return e.text=t}},l+": ")),o.a.createElement("span",{className:ve.a.time},ae(n))))}}]),t}();ye.PropTypes={eventDate:l.a.string.isRequired,contextParams:l.a.object.isRequired};var xe=me(ye),we=n(317),Ee=n.n(we),ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),ge(t,[{key:"render",value:function(){var e=this.props,t=e.eventDate,n=e.contextParams,r=n.author,i=n.text,a=void 0;try{a=decodeURIComponent(i)}catch(e){a=i}return o.a.createElement("div",{className:Ee.a.container},o.a.createElement("div",{className:Ee.a.icon}),o.a.createElement("div",{className:Ee.a.content},o.a.createElement("div",{className:Ee.a.text},o.a.createElement("span",{className:Ee.a.label},__("label.notifications.announcement.title")+": "),o.a.createElement("span",null,"«"+a+"»")),o.a.createElement("span",{className:Ee.a.time},ae(t)+", "+r)))}}]),t}();_e.PropTypes={eventDate:l.a.string.isRequired,contextParams:l.a.object.isRequired};var De=me(_e),Oe=n(340),ke=n.n(Oe),je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),je(t,[{key:"render",value:function(){var e=this.props,t=e.eventDate,n=e.contextParams,r=n.avatarUrl,i=n.author,a=n.text;return o.a.createElement("div",{className:ke.a.container},o.a.createElement("img",{src:r,alt:i,className:ke.a.avatar}),o.a.createElement("div",{className:ke.a.content},o.a.createElement("div",{className:ke.a.text},a),o.a.createElement("span",{className:ke.a.time},ae(t)+", "+i)))}}]),t}();Ne.PropTypes={eventDate:l.a.string.isRequired,contextParams:l.a.object.isRequired};var Re=me(Ne),Ce=n(339),Te=n.n(Ce),Pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Pe(t,[{key:"render",value:function(){var e=this.props,t=e.eventDate,n=e.contextParams,r=n.avatarUrl,i=n.author,a=n.text;return o.a.createElement("div",{className:Te.a.container},o.a.createElement("img",{src:r,alt:i,className:Te.a.avatar}),o.a.createElement("div",{className:Te.a.content},o.a.createElement("div",{className:Te.a.text},a),o.a.createElement("span",{className:Te.a.time},ae(t)+", "+i)))}}]),t}();Ae.PropTypes={eventDate:l.a.string.isRequired,contextParams:l.a.object.isRequired};var Se=me(Ae),Ue=function(e){var t=e.type,n=e.notification,r=e.onRead,i=e.onView;switch(t){case d.Comment:return o.a.createElement(xe,{notification:n,onRead:r,onView:i});case d.Announcement:return o.a.createElement(De,{notification:n,onRead:r});case d.Engagement:return o.a.createElement(Re,{notification:n,onRead:r,onView:i});case d.Tutoring:return o.a.createElement(Se,{notification:n,onRead:r,onView:i})}return null},Ie=n(479),Fe=n.n(Ie),Le=function(){return o.a.createElement("div",{className:Fe.a.container},o.a.createElement("span",{className:Fe.a.text},__("label.notifications.empty")))},qe=n(478),Me=n.n(qe),He=function(){for(var e=[],t=0;t<12;t+=1)e.push(o.a.createElement("div",{key:t,className:Me.a.bar}));return o.a.createElement("div",{className:Me.a.container},e)},Ve=n(426),Qe=n.n(Ve),We=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Be=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=ze(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleOutsideClick=function(e){r.list.contains(e.target)||r.props.onHide()},r.handleWaypointEnter=function(){var e=r.props,t=e.onFetch,n=e.isFetching,o=e.notifications;!n&&o.length>0&&t(o[o.length-1].id)},ze(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),We(t,[{key:"componentDidMount",value:function(){Object(Q.a)({click:this.handleOutsideClick}),this.props.onFetch()}},{key:"componentWillUnmount",value:function(){Object(Q.c)({click:this.handleOutsideClick})}},{key:"render",value:function(){var e=this,t=this.props,n=t.notifications,r=t.onRead,i=t.onView,a=t.hasNext;return o.a.createElement("div",{className:Qe.a.container},o.a.createElement("div",{className:Qe.a.notifications,ref:function(t){return e.list=t}},n.length>0?n.map(function(e,t){return o.a.createElement(Ue,{key:e.id+"-"+t,notification:e,type:e.type,onRead:r,onView:i})}):o.a.createElement(Le,null),n.length>0&&a&&o.a.createElement(V.a,{onEnter:this.handleWaypointEnter,scrollableAncestor:this.list},o.a.createElement("div",{className:Qe.a.placeholder},o.a.createElement(He,null)))))}}]),t}();Be.propTypes={notifications:l.a.array.isRequired,onHide:l.a.func.isRequired,onFetch:l.a.func.isRequired,onRead:l.a.func.isRequired,onView:l.a.func.isRequired,isFetching:l.a.bool.isRequired,hasNext:l.a.bool.isRequired};var Xe=Be,Je=n(244),$e=n.n(Je),Ze=function(){return o.a.createElement("div",{className:$e.a.container},o.a.createElement("div",{className:$e.a.announcement_icon}),o.a.createElement("span",null,"Опубликовано новое объявление"))},Ge=function(e){var t=e.avatarUrl,n=e.author,r=e.sex;return o.a.createElement("div",{className:$e.a.container},o.a.createElement(de.a,{author:{avatarUrl:t,name:n},style:{width:23,height:23,marginRight:7}}),o.a.createElement("span",{className:$e.a.author},n),o.a.createElement("span",null,"Male"===r?"ответил Вам":"ответила Вам"))},Ke=function(e){var t=e.avatarUrl,n=e.popoverText;return o.a.createElement("div",{className:$e.a.container},o.a.createElement(de.a,{author:{avatarUrl:t},style:{width:23,height:23,marginRight:7}}),o.a.createElement("span",null,n))},Ye=function(e){var t=e.avatarUrl,n=e.popoverText;return o.a.createElement("div",{className:$e.a.container},o.a.createElement(de.a,{author:{avatarUrl:t},style:{width:23,height:23,marginRight:7}}),o.a.createElement("span",null,n))},et=function(e){var t=e.type,n=e.notification;switch(t){case d.Comment:return o.a.createElement(Ge,{avatarUrl:n.avatarUrl,author:n.author,sex:n.sex});case d.Announcement:return o.a.createElement(Ze,null);case d.Engagement:return o.a.createElement(Ke,{avatarUrl:n.avatarUrl,popoverText:n.popoverText});case d.Tutoring:return o.a.createElement(Ye,{avatarUrl:n.avatarUrl,popoverText:n.popoverText})}return null},tt=n(477),nt=n.n(tt),rt=function(e){var t=e.onClick,n=e.unviewedCount,r=n&&n>0?"Новых уведомлений: "+n:"Нет новых уведомлений";return o.a.createElement("div",{className:nt.a.container,onClick:t,title:r},n>0&&o.a.createElement("div",{className:nt.a.counter},n>99?"99+":n))},ot=n(548),it=n.n(ot),at=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ut=!1,st=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=ct(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={expanded:!1,popover:!0},r.handleNotificationsToggle=function(){var e=r.props,t=e.unviewedCount,n=e.notifications;t&&t>0&&n[0]&&(n[0].type===d.Announcement?Object(f.b)(m.NotificationsAdOpened):n[0].type===d.Comment&&Object(f.b)(m.NotificationsCommentOpened),Object(f.b)(m.NotificationsOpened)),r.setState({expanded:!r.state.expanded,popover:!1},function(){r.state.expanded||r.props.viewNotifications()})},ct(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),at(t,[{key:"componentWillMount",value:function(){var e=window.location.href.match(/([^\/]*)\/*$/)[1];"feed"!==e&&"user"!==e&&"teacher"!==e&&"organization"!==e&&-1===window.location.href.indexOf("workplace")||(ut=!0)}},{key:"componentDidMount",value:function(){this.props.fetchNotifications()}},{key:"componentWillReceiveProps",value:function(){var e=this.props,t=e.unviewedCount,n=e.notifications;t&&t>0&&n[0]&&(n[0].type===d.Announcement?Object(f.b)(m.HintAdShown):n[0].type===d.Comment&&Object(f.b)(m.HintCommentShown),Object(f.b)(m.CounterShown))}},{key:"render",value:function(){var e=this.state,t=e.expanded,n=e.popover,r=this.props,i=r.notifications,a=r.unviewedCount,c=r.isFetching,u=r.hasNext;return o.a.createElement("div",{className:it.a.container},o.a.createElement(rt,{onClick:this.handleNotificationsToggle,unviewedCount:a}),t&&o.a.createElement(Xe,{onFetch:this.props.fetchNotifications,onHide:this.handleNotificationsToggle,onRead:this.props.readNotifications,onView:this.props.viewNotifications,notifications:i,isFetching:c,hasNext:u}),ut&&n&&a>0&&o.a.createElement(et,{type:i[0]&&i[0].type,notification:i[0]&&i[0].contextParams}))}}]),t}();st.propTypes={notifications:l.a.array.isRequired,unviewedCount:l.a.number,fetchNotifications:l.a.func.isRequired,viewNotifications:l.a.func.isRequired,readNotifications:l.a.func.isRequired,isFetching:l.a.bool.isRequired,hasNext:l.a.bool},st.defaultProps={unviewedCount:null,hasNext:!0};var lt=Object(u.b)(function(e){return{notifications:F(e),unviewedCount:q(e),isFetching:L(e),hasNext:M(e)}},function(e){return Object(p.b)({fetchNotifications:j,viewNotifications:R,readNotifications:T},e)})(st),pt=n(73),ft=regeneratorRuntime.mark(mt);function mt(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(A);case 2:case"end":return e.stop()}},ft,this)}var dt=null;var ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function vt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var bt={notifications:[],isFetching:!1,lastNotificationId:null,unviewedCount:null,hasNext:!0};var yt=Object(p.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt;return arguments[1].type,e},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments[1];switch(t.type){case D.NOTIFICATIONS_REQUEST:return ht({},e,{isFetching:!0,lastNotificationId:t.payload.lastNotificationId});case D.NOTIFICATIONS_REQUEST_COMPLETE:var n=t.meta.params.lastNotificationId;if(!n)return ht({},e,{isFetching:!1,notifications:t.payload.notifications,unviewedCount:t.payload.unviewedCount,lastNotificationId:null,hasNext:t.payload.notifications.length===O});if(n===e.lastNotificationId)return ht({},e,{isFetching:!1,notifications:[].concat(vt(e.notifications),vt(t.payload.notifications)),unviewedCount:t.payload.unviewedCount,lastNotificationId:null,hasNext:t.payload.notifications.length===O});break;case D.NOTIFICATIONS_REQUEST_FAILED:return ht({},e,{isFetching:!1,lastNotificationId:null});case D.VIEW_REQUEST_COMPLETE:if(t.payload.isSuccess)return ht({},e,{unviewedCount:0})}return e}}),xt=Object(p.d)(yt,window.initialState,pt.a);pt.b.run(mt);var wt=document.getElementById(c.rootElementId);!function(e){Object(i.render)(o.a.createElement(a.AppContainer,null,o.a.createElement(e,null)),wt)}(function(){return o.a.createElement(u.a,{store:xt},o.a.createElement(lt,null))})},604:function(e,t,n){n(105),n(104),e.exports=n(583)},62:function(e,t,n){"use strict";var r=window.dnevnik?window.dnevnik.youtubeApiKey:"",o=function(e){return fetch("https://www.googleapis.com/youtube/v3/videos?part=id&id="+e+"&key="+r).then(function(e){return e.json()}).catch(function(e){return null})};n.d(t,"b",function(){return u}),n.d(t,"a",function(){return p});function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}("next")})}}var a=[{regex:/youtu\.be\/([\w\-.]+)/,embedUrl:"https://www.youtube.com/embed/!$1!",apiMethod:function(e){return o(e)},host:"youtube"},{regex:/youtube\.com(.+)v=([^&]+)/,embedUrl:"https://www.youtube.com/embed/!$1!",apiMethod:function(e){return o(e)},host:"youtube"}],c=function(){var e=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,Promise.all(a.map(function(){var e=i(regeneratorRuntime.mark(function e(r){var o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=t.match(r.regex))){e.next=14;break}if("youtube"!==r.host&&"vimeo"!==r.host){e.next=9;break}return e.next=5,r.apiMethod(o[o.length-1]);case 5:i=e.sent,n=i.items&&i.items[0]?r.embedUrl.replace("!$1!",i.items[0].id):null,e.next=14;break;case 9:if("rutube"!==r.host&&"coub"!==r.host){e.next=14;break}return e.next=12,r.apiMethod(t);case 12:(a=e.sent)&&(n=a.match(/src\s*=\s*"(.+?)"/).slice(-1));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.content,r=null,e.next=4,c(n);case 4:return(o=e.sent)&&(r=o),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),s=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(!0)},r.onerror=function(){return n(!1)},r.src=e})},l=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},p=function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.content,r=t.type,o=null,"text"!==r&&"img"!==r){e.next=17;break}i=n.split(" "),a=null,c=0;do{l(i[c])&&(a=i[c]),c+=1}while(!a&&c<i.length);if(!a){e.next=17;break}return e.prev=8,e.next=11,s(a);case 11:if(!e.sent){e.next=13;break}o=a;case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e,void 0,[[8,15]])}));return function(t){return e.apply(this,arguments)}}()},7:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return u});var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var r in t)e.addEventListener(r,t[r],n)},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var r in t)e.removeEventListener(r,t[r],n)},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(document,e,t)},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(document,e,t)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(window,e,t)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(window,e,t)}},73:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a});var r=n(6),o=n(81);var i=Object(o.a)(),a=function(e){return r.a.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))}([i])},9:function(e,t,n){"use strict";var r=n(2),o=n(22),i=n(14),a=n(133),c=n.n(a),u={isNotEmpty:function(e){return void 0!==e&&!c()(e)}},s=function(e,t,n){if("function"==typeof t)return t(e,n);var r=!1,o=Object.keys(t).reduce(function(o,i){var a=function(e,t,n){if("function"==typeof t)return t(e,n);var r=Object.keys(t).find(function(t){return!u[t](e)});return!!r&&t[r]}(e[i],t[i],n);return null!==a&&!1!==a&&(o[i]=a,r=!0),o},{});return r?o:null},l=n(20);n.d(t,"a",function(){return p}),n.d(t,"b",function(){return m});var p=function(e,t){return Object(l.b)(t,function(t){return e+"/"+t})},f=function(e,t){var n=regeneratorRuntime.mark(a);function a(a){var c,u,l=a.payload,p=a.meta;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p&&p.validation&&(c=s(l,p.validation))&&i.b.validationException(c),n.next=4,Object(r.a)(t,l);case 4:return u=n.sent,p&&p.schema&&(u=Object(o.normalize)(u,p.schema)),n.next=8,Object(r.c)({type:e+"_COMPLETE",payload:u,meta:p});case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(r.c)({type:e+"_FAILED",payload:n.t0,meta:p});case 14:case"end":return n.stop()}},n,this,[[0,10]])}return a},m=function(e,t){return function(e){return function(t,n){var o=regeneratorRuntime.mark(a),i=e(t,n);function a(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.g)(t,i);case 2:case"end":return e.stop()}},o,this)}return a}}(f)(e,t)}}});
//# sourceMappingURL=notifications.js.map